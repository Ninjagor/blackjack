(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{5160:(e,t,s)=>{"use strict";s.d(t,{default:()=>eb});var a=s(5155),r=s(2115),n=s(133),l=s(4616),i=s(9708),d=s(2085),o=s(2596),c=s(9688);function m(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,c.QP)((0,o.$)(t))}let x=(0,d.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=r.forwardRef((e,t)=>{let{className:s,variant:r,size:n,asChild:l=!1,...d}=e,o=l?i.DX:"button";return(0,a.jsx)(o,{className:m(x({variant:r,size:n,className:s})),ref:t,...d})});u.displayName="Button";let p=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:m("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});p.displayName="Card";let f=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:m("flex flex-col space-y-1.5 p-6",s),...r})});f.displayName="CardHeader",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:m("text-2xl font-semibold leading-none tracking-tight",s),...r})}).displayName="CardTitle",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:m("text-sm text-muted-foreground",s),...r})}).displayName="CardDescription";let h=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:m("p-6 pt-0",s),...r})});h.displayName="CardContent";let g=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:m("flex items-center p-6 pt-0",s),...r})});g.displayName="CardFooter";var j=s(5452),N=s(4416);let b=j.bL,v=j.l9,y=j.ZL;j.bm;let w=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(j.hJ,{ref:t,className:m("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r})});w.displayName=j.hJ.displayName;let S=r.forwardRef((e,t)=>{let{className:s,children:r,...n}=e;return(0,a.jsxs)(y,{children:[(0,a.jsx)(w,{}),(0,a.jsxs)(j.UC,{ref:t,className:m("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...n,children:[r,(0,a.jsxs)(j.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(N.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});S.displayName=j.UC.displayName;let R=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:m("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};R.displayName="DialogHeader";let C=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(j.hE,{ref:t,className:m("text-lg font-semibold leading-none tracking-tight",s),...r})});C.displayName=j.hE.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(j.VY,{ref:t,className:m("text-sm text-muted-foreground",s),...r})}).displayName=j.VY.displayName;let k=r.forwardRef((e,t)=>{let{className:s,type:r,...n}=e;return(0,a.jsx)("input",{type:r,className:m("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...n})});k.displayName="Input";var A=s(968);let D=(0,d.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),L=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(A.b,{ref:t,className:m(D(),s),...r})});L.displayName=A.b.displayName;var B=s(64);let T=B.bL,I=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(B.B8,{ref:t,className:m("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...r})});I.displayName=B.B8.displayName;let E=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(B.l9,{ref:t,className:m("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...r})});E.displayName=B.l9.displayName;let O=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(B.UC,{ref:t,className:m("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...r})});O.displayName=B.UC.displayName;let P=0,_=new Map,z=e=>{if(_.has(e))return;let t=setTimeout(()=>{_.delete(e),V({type:"REMOVE_TOAST",toastId:e})},1e6);_.set(e,t)},F=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?z(s):e.toasts.forEach(e=>{z(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},U=[],J={toasts:[]};function V(e){J=F(J,e),U.forEach(e=>{e(J)})}function M(e){let{...t}=e,s=(P=(P+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>V({type:"DISMISS_TOAST",toastId:s});return V({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>V({type:"UPDATE_TOAST",toast:{...e,id:s}})}}var W=s(5868),H=s(8186),Y=s(2525),Z=s(7649);let G=Z.bL,q=Z.l9,X=Z.ZL,Q=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(Z.hJ,{className:m("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r,ref:t})});Q.displayName=Z.hJ.displayName;let $=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsxs)(X,{children:[(0,a.jsx)(Q,{}),(0,a.jsx)(Z.UC,{ref:t,className:m("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...r})]})});$.displayName=Z.UC.displayName;let K=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:m("flex flex-col space-y-2 text-center sm:text-left",t),...s})};K.displayName="AlertDialogHeader";let ee=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:m("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};ee.displayName="AlertDialogFooter";let et=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(Z.hE,{ref:t,className:m("text-lg font-semibold",s),...r})});et.displayName=Z.hE.displayName;let es=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(Z.VY,{ref:t,className:m("text-sm text-muted-foreground",s),...r})});es.displayName=Z.VY.displayName;let ea=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(Z.rc,{ref:t,className:m(x(),s),...r})});ea.displayName=Z.rc.displayName;let er=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(Z.ZD,{ref:t,className:m(x({variant:"outline"}),"mt-2 sm:mt-0",s),...r})});function en(e){let{player:t,isDealer:s,onBetChange:n,onDeclareWinner:l,onDeclarePlayerLost:i,onRemove:d}=e,[o,c]=(0,r.useState)(t.currentBet.toString()),m=e=>{c(e);let s=Number.parseInt(e)||0;s>=0&&s<=t.points&&n(s)};return(0,a.jsxs)(p,{className:"".concat(s?"bg-gray-800":"bg-green-700"," text-white border-none shadow-md"),children:[(0,a.jsxs)(h,{className:"pt-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("h3",{className:"text-lg font-bold",children:t.name}),s&&(0,a.jsx)("span",{className:"ml-2 text-xs bg-yellow-600 px-2 py-0.5 rounded-full",children:"Dealer"})]}),(0,a.jsxs)("div",{className:"text-lg font-bold",children:[t.points," pts"]})]}),!s&&(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(k,{type:"number",value:o,onChange:e=>m(e.target.value),min:"0",max:t.points.toString(),className:"bg-green-800 border-green-600 text-white",placeholder:"Bet amount"}),(0,a.jsxs)(u,{variant:"outline",size:"sm",className:"bg-yellow-600 hover:bg-yellow-500 text-white border-yellow-500",onClick:()=>{let e=Number.parseInt(o)||0;!(e>t.points)&&n(e)},children:[(0,a.jsx)(W.A,{className:"h-4 w-4 mr-1"}),"Bet"]})]}),t.currentBet>0&&(0,a.jsxs)("div",{className:"mt-2 text-center bg-green-800 py-1 px-2 rounded-md",children:["Current bet: ",(0,a.jsx)("span",{className:"font-bold",children:t.currentBet})," points"]})]})]}),(0,a.jsxs)(g,{className:"flex justify-between pt-0 pb-4",children:[!s&&t.currentBet>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(u,{variant:"outline",size:"sm",className:"bg-green-600 hover:bg-green-500 text-white border-green-500",onClick:l,children:[(0,a.jsx)(H.A,{className:"h-4 w-4 mr-1"}),"Win"]}),(0,a.jsx)(u,{variant:"outline",size:"sm",className:"bg-red-700 hover:bg-red-600 text-white border-red-600",onClick:i,children:"Lost"})]}),!s&&d&&(0,a.jsxs)(G,{children:[(0,a.jsx)(q,{asChild:!0,children:(0,a.jsx)(u,{variant:"outline",size:"sm",className:"bg-red-700 hover:bg-red-600 text-white border-red-600 ml-auto",children:(0,a.jsx)(Y.A,{className:"h-4 w-4"})})}),(0,a.jsxs)($,{children:[(0,a.jsxs)(K,{children:[(0,a.jsx)(et,{children:"Remove Player"}),(0,a.jsxs)(es,{children:["Are you sure you want to remove ",t.name," from the game? This action cannot be undone."]})]}),(0,a.jsxs)(ee,{children:[(0,a.jsx)(er,{children:"Cancel"}),(0,a.jsx)(ea,{onClick:d,children:"Remove"})]})]})]})]})]})}er.displayName=Z.ZD.displayName;var el=s(2138),ei=s(4186),ed=s(9912),eo=s(6474),ec=s(7863),em=s(5196);let ex=ed.bL;ed.YJ;let eu=ed.WT,ep=r.forwardRef((e,t)=>{let{className:s,children:r,...n}=e;return(0,a.jsxs)(ed.l9,{ref:t,className:m("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...n,children:[r,(0,a.jsx)(ed.In,{asChild:!0,children:(0,a.jsx)(eo.A,{className:"h-4 w-4 opacity-50"})})]})});ep.displayName=ed.l9.displayName;let ef=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(ed.PP,{ref:t,className:m("flex cursor-default items-center justify-center py-1",s),...r,children:(0,a.jsx)(ec.A,{className:"h-4 w-4"})})});ef.displayName=ed.PP.displayName;let eh=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(ed.wn,{ref:t,className:m("flex cursor-default items-center justify-center py-1",s),...r,children:(0,a.jsx)(eo.A,{className:"h-4 w-4"})})});eh.displayName=ed.wn.displayName;let eg=r.forwardRef((e,t)=>{let{className:s,children:r,position:n="popper",...l}=e;return(0,a.jsx)(ed.ZL,{children:(0,a.jsxs)(ed.UC,{ref:t,className:m("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:n,...l,children:[(0,a.jsx)(ef,{}),(0,a.jsx)(ed.LM,{className:m("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,a.jsx)(eh,{})]})})});eg.displayName=ed.UC.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(ed.JU,{ref:t,className:m("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...r})}).displayName=ed.JU.displayName;let ej=r.forwardRef((e,t)=>{let{className:s,children:r,...n}=e;return(0,a.jsxs)(ed.q7,{ref:t,className:m("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(ed.VF,{children:(0,a.jsx)(em.A,{className:"h-4 w-4"})})}),(0,a.jsx)(ed.p4,{children:r})]})});function eN(e){let{dealer:t,players:s,currentRound:n,onCreateLoan:l,onRepayLoan:i}=e,[d,o]=(0,r.useState)(""),[c,m]=(0,r.useState)(""),[x,g]=(0,r.useState)(50),[j,N]=(0,r.useState)(10),[y,w]=(0,r.useState)(5),[A,D]=(0,r.useState)("active"),B=[t,...s],P=B.flatMap(e=>e.loans.map(e=>{var t,s;return{...e,fromName:(null===(t=B.find(t=>t.id===e.from))||void 0===t?void 0:t.name)||"Unknown",toName:(null===(s=B.find(t=>t.id===e.to))||void 0===s?void 0:s.name)||"Unknown"}})).filter((e,t,s)=>t===s.findIndex(t=>t.id===e.id)),_=P.filter(e=>!e.paid),z=P.filter(e=>e.paid),F=e=>{let t=e.amount+e.amount*e.interest/100;i(e.id,e.to,e.from,t)},U=(e,t)=>e+e*t/100,J=e=>e<n;return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)(p,{className:"bg-green-800 text-white border-none shadow-lg",children:[(0,a.jsx)(f,{className:"pb-2",children:(0,a.jsx)("h2",{className:"text-xl font-bold",children:"Loan Manager"})}),(0,a.jsx)(h,{children:(0,a.jsxs)(b,{children:[(0,a.jsx)(v,{asChild:!0,children:(0,a.jsxs)(u,{className:"w-full",children:[(0,a.jsx)(W.A,{className:"h-4 w-4 mr-2"}),"Create New Loan"]})}),(0,a.jsxs)(S,{children:[(0,a.jsx)(R,{children:(0,a.jsx)(C,{children:"Create Loan"})}),(0,a.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(L,{htmlFor:"from",children:"Lender (From)"}),(0,a.jsxs)(ex,{value:d,onValueChange:o,children:[(0,a.jsx)(ep,{id:"from",children:(0,a.jsx)(eu,{placeholder:"Select lender"})}),(0,a.jsx)(eg,{children:B.map(e=>(0,a.jsxs)(ej,{value:e.id,children:[e.name," (",e.points," pts)"]},"from-".concat(e.id)))})]})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(L,{htmlFor:"to",children:"Borrower (To)"}),(0,a.jsxs)(ex,{value:c,onValueChange:m,children:[(0,a.jsx)(ep,{id:"to",children:(0,a.jsx)(eu,{placeholder:"Select borrower"})}),(0,a.jsx)(eg,{children:B.map(e=>(0,a.jsxs)(ej,{value:e.id,disabled:e.id===d,children:[e.name," (",e.points," pts)"]},"to-".concat(e.id)))})]})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(L,{htmlFor:"amount",children:"Loan Amount"}),(0,a.jsx)(k,{id:"amount",type:"number",value:x,onChange:e=>g(Number(e.target.value)),min:1})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(L,{htmlFor:"interest",children:"Interest Rate (%)"}),(0,a.jsx)(k,{id:"interest",type:"number",value:j,onChange:e=>N(Number(e.target.value)),min:0})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(L,{htmlFor:"dueInRounds",children:"Due in (Rounds)"}),(0,a.jsx)(k,{id:"dueInRounds",type:"number",value:y,onChange:e=>w(Number(e.target.value)),min:1})]}),d&&c&&x>0&&(0,a.jsxs)("div",{className:"bg-green-100 text-green-800 p-2 rounded-md text-sm",children:["Total to repay: ",U(x,j)," points"]})]}),(0,a.jsx)(u,{onClick:()=>{if(!d||!c||d===c)return;let e=B.find(e=>e.id===d);e&&!(e.points<x)&&(l(d,c,x,j,y),g(50),N(10),w(5))},children:"Create Loan"})]})]})})]}),(0,a.jsxs)(T,{value:A,onValueChange:D,className:"w-full",children:[(0,a.jsxs)(I,{className:"grid w-full grid-cols-2",children:[(0,a.jsx)(E,{value:"active",children:"Active Loans"}),(0,a.jsx)(E,{value:"paid",children:"Paid Loans"})]}),(0,a.jsx)(O,{value:"active",children:0===_.length?(0,a.jsx)(p,{className:"bg-green-800 text-white border-none shadow-lg",children:(0,a.jsx)(h,{className:"pt-6 pb-4 text-center",children:"No active loans"})}):(0,a.jsx)("div",{className:"space-y-3",children:_.map(e=>(0,a.jsx)(p,{className:"".concat(J(e.dueRound)?"bg-red-800":"bg-green-700"," text-white border-none shadow-md"),children:(0,a.jsxs)(h,{className:"pt-4 pb-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{className:"font-bold",children:e.fromName}),(0,a.jsx)(el.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"font-bold",children:e.toName})]}),(0,a.jsxs)("div",{className:"text-sm",children:[e.amount," pts"]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-xs mt-2",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(W.A,{className:"h-3 w-3 mr-1"}),j,"% interest"]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(ei.A,{className:"h-3 w-3 mr-1"}),"Due: Round ",e.dueRound,J(e.dueRound)&&(0,a.jsx)("span",{className:"ml-1 bg-red-600 px-1 rounded text-xs",children:"Overdue"})]})]}),(0,a.jsxs)("div",{className:"mt-3 flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"text-sm",children:["Repay:"," ",(0,a.jsx)("span",{className:"font-bold",children:U(e.amount,e.interest)})," pts"]}),(0,a.jsx)(u,{size:"sm",variant:"outline",className:"bg-green-600 hover:bg-green-500 text-white border-green-500",onClick:()=>F(e),children:"Repay Loan"})]})]})},e.id))})}),(0,a.jsx)(O,{value:"paid",children:0===z.length?(0,a.jsx)(p,{className:"bg-green-800 text-white border-none shadow-lg",children:(0,a.jsx)(h,{className:"pt-6 pb-4 text-center",children:"No paid loans"})}):(0,a.jsx)("div",{className:"space-y-3",children:z.map(e=>(0,a.jsx)(p,{className:"bg-gray-700 text-white border-none shadow-md opacity-80",children:(0,a.jsxs)(h,{className:"pt-4 pb-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{className:"font-bold",children:e.fromName}),(0,a.jsx)(el.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"font-bold",children:e.toName})]}),(0,a.jsxs)("div",{className:"text-sm",children:[e.amount," pts"]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-xs mt-2",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(W.A,{className:"h-3 w-3 mr-1"}),e.interest,"% interest"]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(ei.A,{className:"h-3 w-3 mr-1"}),"Due: Round ",e.dueRound]})]}),(0,a.jsxs)("div",{className:"mt-3 flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"text-sm",children:["Repaid:"," ",(0,a.jsx)("span",{className:"font-bold",children:U(e.amount,e.interest)})," pts"]}),(0,a.jsx)("span",{className:"text-xs bg-green-600 px-2 py-0.5 rounded-full",children:"Paid"})]})]})},e.id))})})]})]})}function eb(){let{toast:e}=function(){let[e,t]=r.useState(J);return r.useEffect(()=>(U.push(t),()=>{let e=U.indexOf(t);e>-1&&U.splice(e,1)}),[e]),{...e,toast:M,dismiss:e=>V({type:"DISMISS_TOAST",toastId:e})}}(),[t,s]=(0,r.useState)([]),[i,d]=(0,r.useState)({id:"dealer",name:"Dealer",points:1e3,currentBet:0,loans:[]}),[o,c]=(0,r.useState)(""),[m,x]=(0,r.useState)(100),[g,j]=(0,r.useState)([]),[N,y]=(0,r.useState)("game"),[w,A]=(0,r.useState)(0);(0,r.useEffect)(()=>{let e=localStorage.getItem("blackjack-players"),t=localStorage.getItem("blackjack-dealer"),a=localStorage.getItem("blackjack-history");e&&s(JSON.parse(e)),t&&d(JSON.parse(t)),a&&j(JSON.parse(a))},[]),(0,r.useEffect)(()=>{localStorage.setItem("blackjack-players",JSON.stringify(t)),localStorage.setItem("blackjack-dealer",JSON.stringify(i)),localStorage.setItem("blackjack-history",JSON.stringify(g))},[t,i,g]);let D=(e,a)=>{s(t.map(t=>t.id===e?{...t,currentBet:a}:t))},B=a=>{let r="dealer"===a?i:t.find(e=>e.id===a);if(!r)return;let n=t.filter(e=>e.id!==a).reduce((e,t)=>e+t.currentBet,0);"dealer"===a?d({...i,points:i.points+n,currentBet:0}):s(t.map(e=>e.id===a?{...e,points:e.points+n,currentBet:0}:e)),s(t.map(e=>e.id!==a?{...e,points:e.points-e.currentBet,currentBet:0}:e)),j([{id:Date.now().toString(),timestamp:new Date,winner:r.name,losers:t.filter(e=>e.id!==a).map(e=>e.name),amount:n},...g]),A(e=>e+1),e({title:"Winner Declared",description:"".concat(r.name," won ").concat(n," points!")})},P=a=>{let r=t.find(e=>e.id===a);r&&!(r.currentBet<=0)&&(d({...i,points:i.points+r.currentBet}),s(t.map(e=>e.id===a?{...e,points:e.points-e.currentBet,currentBet:0}:e)),e({title:"Player Lost",description:"".concat(r.name," lost ").concat(r.currentBet," points to the dealer")}))},_=a=>{s(t.filter(e=>e.id!==a)),e({title:"Player Removed",description:"Player has been removed from the game"})};return(0,a.jsxs)("div",{className:"container mx-auto max-w-md",children:[(0,a.jsx)(p,{className:"bg-green-800 text-white border-none shadow-lg mb-4",children:(0,a.jsxs)(f,{className:"pb-2",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-center",children:"Blackjack Scorekeeper"}),(0,a.jsxs)("div",{className:"text-center text-sm",children:["Round: ",w]})]})}),(0,a.jsxs)(T,{value:N,onValueChange:y,className:"w-full",children:[(0,a.jsxs)(I,{className:"grid w-full grid-cols-3 mb-4",children:[(0,a.jsx)(E,{value:"game",children:"Game"}),(0,a.jsx)(E,{value:"loans",children:"Loans"}),(0,a.jsx)(E,{value:"history",children:"History"})]}),(0,a.jsxs)(O,{value:"game",className:"space-y-4",children:[(0,a.jsx)(en,{player:i,isDealer:!0,onBetChange:e=>{},onDeclareWinner:()=>{}}),t.map(e=>(0,a.jsx)(en,{player:e,isDealer:!1,onBetChange:t=>D(e.id,t),onDeclareWinner:()=>B(e.id),onDeclarePlayerLost:()=>P(e.id),onRemove:()=>_(e.id)},e.id)),(0,a.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,a.jsx)(u,{variant:"outline",className:"flex-1 bg-green-700 hover:bg-green-600 text-white border-green-600",onClick:()=>B("dealer"),children:"Dealer Wins"}),(0,a.jsxs)(u,{variant:"outline",className:"flex-1 bg-red-700 hover:bg-red-600 text-white border-red-600",onClick:()=>{s(t.map(e=>({...e,currentBet:0}))),e({title:"Game Reset",description:"All bets have been reset"})},children:[(0,a.jsx)(n.A,{className:"h-4 w-4 mr-2"}),"Reset Bets"]}),t.map(e=>(0,a.jsxs)(u,{variant:"outline",className:"flex-1 bg-gray-700 hover:bg-gray-600 text-white border-gray-600",onClick:()=>P(e.id),children:[e.name," Lost"]},e.id))]}),(0,a.jsxs)(b,{children:[(0,a.jsx)(v,{asChild:!0,children:(0,a.jsxs)(u,{className:"w-full mt-4",children:[(0,a.jsx)(l.A,{className:"h-4 w-4 mr-2"}),"Add Player"]})}),(0,a.jsxs)(S,{children:[(0,a.jsx)(R,{children:(0,a.jsx)(C,{children:"Add New Player"})}),(0,a.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(L,{htmlFor:"name",children:"Name"}),(0,a.jsx)(k,{id:"name",value:o,onChange:e=>c(e.target.value),placeholder:"Enter player name"})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(L,{htmlFor:"points",children:"Starting Points"}),(0,a.jsx)(k,{id:"points",type:"number",value:m,onChange:e=>x(Number(e.target.value)),min:1})]})]}),(0,a.jsx)(u,{onClick:()=>{if(!o.trim()){e({title:"Error",description:"Player name cannot be empty",variant:"destructive"});return}s([...t,{id:Date.now().toString(),name:o,points:m,currentBet:0,loans:[]}]),c(""),x(100),e({title:"Player Added",description:"".concat(o," has joined the game with ").concat(m," points")})},children:"Add Player"})]})]})]}),(0,a.jsx)(O,{value:"loans",children:(0,a.jsx)(eN,{dealer:i,players:t,currentRound:w,onCreateLoan:(a,r,n,l,o)=>{let c={id:Date.now().toString(),amount:n,interest:l,dueInRounds:o,dueRound:w+o,from:a,to:r,paid:!1};"dealer"===a?d({...i,points:i.points-n,loans:[...i.loans,c]}):s(t.map(e=>e.id===a?{...e,points:e.points-n,loans:[...e.loans,c]}:e)),"dealer"===r?d({...i,points:i.points+n,loans:[...i.loans,c]}):s(t.map(e=>e.id===r?{...e,points:e.points+n,loans:[...e.loans,c]}:e)),e({title:"Loan Created",description:"Loan of ".concat(n," points created with ").concat(l,"% interest, due in ").concat(o," rounds")})},onRepayLoan:(a,r,n,l)=>{"dealer"===n?d({...i,points:i.points+l,loans:i.loans.map(e=>e.id===a?{...e,paid:!0}:e)}):s(t.map(e=>e.id===n?{...e,points:e.points+l,loans:e.loans.map(e=>e.id===a?{...e,paid:!0}:e)}:e)),"dealer"===r?d({...i,points:i.points-l}):s(t.map(e=>e.id===r?{...e,points:e.points-l}:e)),e({title:"Loan Repaid",description:"Loan of ".concat(l," points has been repaid")})}})}),(0,a.jsx)(O,{value:"history",children:(0,a.jsxs)(p,{className:"bg-green-800 text-white border-none shadow-lg",children:[(0,a.jsx)(f,{className:"pb-2",children:(0,a.jsx)("h2",{className:"text-xl font-bold",children:"Game History"})}),(0,a.jsx)(h,{children:0===g.length?(0,a.jsx)("p",{className:"text-center text-gray-300",children:"No games played yet"}):(0,a.jsx)("div",{className:"space-y-3",children:g.map(e=>(0,a.jsxs)("div",{className:"bg-green-700 p-3 rounded-md",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("span",{className:"font-bold",children:[e.winner," won"]}),(0,a.jsx)("span",{className:"text-sm opacity-80",children:new Date(e.timestamp).toLocaleTimeString()})]}),(0,a.jsxs)("div",{className:"text-sm mt-1",children:["Amount: ",e.amount," points"]}),(0,a.jsxs)("div",{className:"text-xs mt-1 text-gray-300",children:["Losers: ",e.losers.join(", ")]})]},e.id))})})]})})]})]})}ej.displayName=ed.q7.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(ed.wv,{ref:t,className:m("-mx-1 my-1 h-px bg-muted",s),...r})}).displayName=ed.wv.displayName},9938:(e,t,s)=>{Promise.resolve().then(s.bind(s,5160))}},e=>{var t=t=>e(e.s=t);e.O(0,[660,441,684,358],()=>t(9938)),_N_E=e.O()}]);